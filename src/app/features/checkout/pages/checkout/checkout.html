<div class="checkout-container min-h-screen bg-gray-50 py-8 px-4">
  <p-toast />
  
  <div class="max-w-2xl mx-auto">
    @if (isLoading()) {
      <div class="flex justify-center items-center min-h-[400px]">
        <p-progressSpinner />
      </div>
    } @else if (packageData()) {
      <p-card styleClass="shadow-xl">
        <ng-template pTemplate="header">
          <div class="bg-gradient-to-r from-purple-600 to-blue-600 p-6 text-white">
            <h1 class="text-2xl md:text-3xl font-bold text-center">
              Confirmar Compra
            </h1>
          </div>
        </ng-template>
        
        <div class="p-6 space-y-6">
          <!-- Detalles del paquete -->
          <div class="bg-gray-50 rounded-lg p-6">
            <h2 class="text-xl font-bold mb-4 text-gray-800">
              Resumen del Paquete
            </h2>
            
            <div class="space-y-3">
              <div class="flex justify-between items-center">
                <span class="text-gray-600">Paquete:</span>
                <span class="font-semibold text-lg">{{ packageData()!.title }}</span>
              </div>
              
              @if (!packageData()!.is_unlimited) {
                <div class="flex justify-between items-center">
                  <span class="text-gray-600">Clases:</span>
                  <span class="font-semibold">{{ packageData()!.classes_count }}</span>
                </div>
                
                <div class="flex justify-between items-center">
                  <span class="text-gray-600">Créditos:</span>
                  <span class="font-semibold">{{ packageData()!.credits_count }}</span>
                </div>
              } @else {
                <div class="flex justify-between items-center">
                  <span class="text-gray-600">Tipo:</span>
                  <span class="font-semibold text-green-600">ILIMITADO</span>
                </div>
              }
              
              <div class="flex justify-between items-center">
                <span class="text-gray-600">Vigencia:</span>
                <span class="font-semibold">{{ packageData()!.validity_days }} días</span>
              </div>
              
              <p-divider />
              
              <div class="flex justify-between items-center text-xl">
                <span class="font-bold text-gray-800">Total:</span>
                <span class="font-bold text-green-600">
                  {{ packageData()!.price | currency:'MXN':'symbol':'1.2-2' }}
                </span>
              </div>
            </div>
          </div>
          
          <!-- Información del usuario -->
          <div class="bg-blue-50 rounded-lg p-4">
            <p class="text-sm text-blue-800">
              <i class="pi pi-info-circle mr-2"></i>
              Procesando compra para: <strong>{{ userEmail() }}</strong>
            </p>
          </div>
          
          <!-- Información adicional -->
          <div class="text-sm text-gray-600 space-y-2">
            <p>
              <i class="pi pi-check-circle text-green-500 mr-2"></i>
              Los créditos se asignarán automáticamente al completar el pago
            </p>
            <p>
              <i class="pi pi-clock text-blue-500 mr-2"></i>
              La vigencia iniciará con el primer uso de créditos
            </p>
            <p>
              <i class="pi pi-shield text-purple-500 mr-2"></i>
              Pago seguro procesado por Stripe
            </p>
          </div>
        </div>
        
        <ng-template pTemplate="footer">
          <div class="flex flex-col sm:flex-row gap-3 justify-between">
            <p-button 
              label="Cancelar"
              severity="secondary"
              [outlined]="true"
              icon="pi pi-arrow-left"
              (onClick)="goBack()"
              [disabled]="isProcessing()" />
            
            <p-button 
              label="Proceder al Pago"
              severity="primary"
              icon="pi pi-credit-card"
              iconPos="right"
              (onClick)="proceedToPayment()"
              [loading]="isProcessing()"
              styleClass="font-bold" />
          </div>
        </ng-template>
      </p-card>
    }
  </div>
</div>